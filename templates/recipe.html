{% extends "base.html" %}

{% block content %}

{% load static %}
    <div class="container recipe">
        {% if recipe.image_file %}
            <img src="{{ recipe.image_file.url }}" style="margin-bottom: 20px;">
        {% else %}
            <img src="{% static 'media/images/default.jpeg' %}" style="margin-bottom: 20px;">
        {% endif %}

        <p>Likes: {{ recipe.like_count }}</p>

        {% if user.is_authenticated %}
            <form action="{% url 'like_recipe' recipe.id %}" method="POST">
                {% csrf_token %}
                <button type="submit", name="recipe_id", value="{{ recipe.id }}", class="btn btn-primary btn-lm">Like</button>
            </form>
        {% else %}
            <p><a href="{% url 'login' %}"> Login to like this recipe.</a></p>
        {% endif %}
        <br/>
        <h4>{{ recipe.name }}</h4>
        <h6>Recipe asked by: {{ recipe.user }}</h6>
        <hr/>
        <p>{{ recipe.instructions|linebreaksbr|safe }}</p>
        <hr/>
        <br/>
        <h5>We also have these recipes by {{ recipe.user }}:</h5>
        {% for r in recipe.user.recipe_set.all %}
        <li><a href="{% url 'recipe' r.id %}">{{ r.name }}</a></li> 
        {% endfor %}
    </div>
{% endblock %}
